<mat-card class="cover"></mat-card>

<div style="display: flex; justify-content: center">
    <mat-card class="pro-info shadow-lg">
        <mat-grid-list class="gird-list" cols="6" rowHeight="50%">
            <mat-grid-tile [colspan]="1" [rowspan]="2">
                <img mat-card-avatar style="margin-left: 10%;transform: scale(4);" src='{{profileImage}}'>
            </mat-grid-tile>
            <mat-grid-tile class="username" style="font-size: 30px;margin-left: 3%;" [colspan]="3" [rowspan]="1">
                {{username}}
            </mat-grid-tile>
            <mat-grid-tile [colspan]="2" [rowspan]="1">
            </mat-grid-tile>
            <mat-grid-tile class="username" [colspan]="1" [rowspan]="1">
                <div style="margin-left: 20%;"> <b>
                        <div style="font-size: 20px;">plans</div>
                        <div style="margin-top: 5px;">{{plansCount}}</div>
                    </b> </div>
            </mat-grid-tile>
            <mat-grid-tile class="username" style="margin-left: -4%;" [colspan]="1" [rowspan]="1"><b>
                    <div style="font-size: 20px;">Followers</div>
                    <div (click)="openDialog()" class="number">{{followersCount}}</div>
                </b></mat-grid-tile>
            <mat-grid-tile class="username" style="margin-left: -10%;" [colspan]="1" [rowspan]="1"><b>
                    <div style="font-size: 20px;">Followings</div>
                    <div (click)="openDialog()" class="number">{{followingCount}}</div>
                </b></mat-grid-tile>
        </mat-grid-list>
    </mat-card>

</div>

<div style="display:flex; justify-content: start; margin-top: 20px; margin-left: 1.5%;margin-right: 1.5%;padding-bottom: 50px;">
    <div id="leftbar" style="width: 20% ;">

        <mat-card class="shadow-lg " style="height: auto;border-radius: 10px">

            <div routerLink="/homepage" class="underline">
                <mat-icon style="margin-left: 10px;margin-top: 7px;">home</mat-icon>
                <p style="margin-left: 10px;margin-top: 10px;">Home</p>
            </div>
            <hr class="hr">
            <div routerLink='{{proUrl}}' class="underline">
                <mat-icon style="margin-left: 10px;margin-top: 7px;">person_outline</mat-icon>
                <p style="margin-left: 10px;margin-top: 10px;">Profile</p>
            </div>
            <hr class="hr">
            <div (click)="refresh()" class="underline">
                <mat-icon style="margin-left: 10px;margin-top: 7px;">date_range</mat-icon>
                <p style="margin-left: 10px;margin-top: 10px;">My plans</p>
            </div>


        </mat-card>
    </div>

    <!-- <div style="display: flex; justify-content: center;">
    <mat-card class="pro-info shadow-lg">
        <div style="display:flex;align-items: center;">
            <div style="display: block;width: 10%; margin-left: 2%;">
                <img style="width: 100%; border-radius: 50%;" src='{{profileImage}}'>
            </div>

            <div style="padding-top: 2%; margin-left: 3%;">
                <div style="font-size: 30px;">
                    {{username}}
                </div>

                <div style="display: flex;margin-top: 7%;">
                    <div>
                        <div> plans</div>
                        <div class="number" style="justify-content: center;display: flex;">{{plansCount}}</div>
                    </div>
                    <div style="margin-left: 15%;margin-right: 15%;">
                        <div>followres</div>
                        <div class="number" style="justify-content: center;display: flex;">{{followersCount}}</div>
                    </div>
                    <div>
                        <div>followings</div>
                        <div class="number" style="justify-content: center;display: flex;">{{followingCount}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </mat-card>
</div>

<div style="display:flex; justify-content: start; margin-top: 30px; margin-left: 5%;margin-right: 5%;">
    <div style="width: 25% ;">
        <mat-card class="shadow-lg" style="height: auto;border-radius: 10px">
            <a style="width : 100%;display:flex; justify-content:flex-start;margin-left: 10px;">
                <mat-icon>date_range</mat-icon>
                <p class="underline" style="margin-left: 10px;margin-top: 3px;">My plans</p>
            </a>
            <a style="width : 100%;display:flex; justify-content:flex-start;margin-left: 10px;" (click)="goToHome()">
                <mat-icon>home</mat-icon>
                <p class="underline" style="margin-left: 10px;margin-top: 3px;">Home</p>
            </a>
            <a style="width : 100%;display:flex; justify-content:flex-start;margin-left: 10px;" (click)="goToProfile()">
                <mat-icon>person_outline</mat-icon>
                <p class="underline" style="margin-left: 10px;margin-top: 3px;">Profile</p>
            </a>
        </mat-card>
    </div> -->

    <div id="content" style="width: 55%; margin-left: 2%;margin-right: 2%">
        <div style="display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        grid-template-rows: 1fr;
        grid-gap: 5%;">
            <div *ngFor="let plan of myPlans">
                <mat-card
                    style="box-shadow: 4px 4px 9px #bdbdbd; width: 100%;height: 100%;padding: 4%; cursor: pointer;">
                    <div style="display: flex;overflow: hidden;width: 100%;margin-bottom: 3%;">
                        <mat-icon (click)="goToPlan(plan.id)" style="min-width: 10px;margin: auto;"
                            class="location-icon">location_on</mat-icon>
                        <span (click)="goToPlan(plan.id)" #city
                            style=" align-self: center;width: 38%;text-overflow: ellipsis;overflow: hidden;white-space: nowrap;"
                            matTooltip="{{plan.destination_city_name}}" matTooltipPosition="above"
                            class="city">{{plan.destination_city_name}}</span>
                        <span (click)="goToPlan(plan.id)" class="date"
                            style="width: 45%;text-overflow: ellipsis;overflow: hidden;white-space: nowrap; text-align: end;align-self: center;"
                            matTooltip="{{plan.creation_date}}" matTooltipPosition="above">At
                            {{plan.creation_date}}</span>
                        <mat-icon
                            style="width: 6% ;font-size: 105%;justify-content: center;align-items: center;display: flex; padding-top: 0.5%;"
                            [matMenuTriggerFor]="moreOptions">more_vert</mat-icon>
                        <mat-menu #moreOptions>
                            <button (click)="onDelete(plan.id)" style="align-items: center;display: flex;"
                                mat-menu-item>
                                <mat-icon style="font-size: 105%;">delete</mat-icon>delete
                            </button>
                        </mat-menu>
                    </div>
                    <div class="im-wrapper" (click)="goToPlan(plan.id)">
                        <img class="im" mat-card-image [src]="plan.cover" />
                    </div>
                </mat-card>
            </div>
            <!-- <mat-grid-tile>
                <mat-card class="shadow-lg" style="width: 90%;height: 85%;background-color: #e1e1e1;">
                    <button mat-icon-button style="width: 100%;height: 100%;">
                        <mat-icon style="font-size: 100px;width: auto;height: 
                            auto;color: white;">
                            add
                        </mat-icon>
                    </button>
                </mat-card>
            </mat-grid-tile> -->
        </div>
    </div>

    <div id="rightbar" style="width: 30%;">
        <mat-card class="shadow-lg" style="border-radius: 10px">
            <mat-card-title style="display:flex;justify-content: center; width: 100%;">
                Top Planners
            </mat-card-title>
            <mat-card-content style="margin-top: 40px;">
                <div class="tp" *ngFor="let tp of topPlanners;">
                    <app-top-planners style="width: 100%;" [username]="tp.username" [email]="tp.email"
                        [profileImg]="tp.profile_img" [rate]="tp.average_rate" [isPublic]="tp.is_public"
                        [userId]="tp.pk">
                    </app-top-planners>
                </div>
            </mat-card-content>
        </mat-card>
    </div>

</div>